<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="net.imyeyu.blog.mapper.UserMapper">
	<!-- 根据 ID 获取 -->
	<select id="findById" resultType="net.imyeyu.blog.entity.User" parameterType="long">
		SELECT * FROM `user` WHERE `id` = #{id}
	</select>
	<!-- 根据用户名获取 -->
	<select id="findByName" resultType="net.imyeyu.blog.entity.User" parameterType="String">
		SELECT * FROM `user` WHERE `name` = #{name}
	</select>
	<!-- 根据邮箱获取 -->
	<select id="findByEmail" resultType="net.imyeyu.blog.entity.User" parameterType="String">
		SELECT * FROM `user` WHERE `id` = #{email}
	</select>
	<!-- 获取列表 -->
    <select id="findAll" resultMap="findAllResult">
        SELECT * FROM users
    </select>
	<resultMap id="findAllResult" type="net.imyeyu.blog.entity.User">
		<id property="id" column="id"/>
		<result property="email" column="email"/>
		<result property="userName" column="user_name"/>
		<result property="password" column="password"/>
		<result property="createdAt" column="created_at"/>
		<result property="canceledAt" column="canceled_at"/>
		<result property="deletedAt" column="deleted_at"/>
	</resultMap>
	<insert id="create" parameterType="net.imyeyu.blog.entity.User" keyColumn="id" keyProperty="id" useGeneratedKeys="true">
		INSERT INTO `users` (`user_name`, `password`, `created_at`) VALUES (#{user.userName}, #{user.password}, #{user.createdAt});
	</insert>
</mapper>